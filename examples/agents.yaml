version: 0.3

# Example configuration demonstrating different agent types:
# 1. Complex structured output agent
# 2. Simple text output agent (using default string output)
# 3. Thread-aware conversational agent

types:
  # Types for structured data analyst agent
  DataAnalysisRequest:
    dataset: string(10..5000)
    query: string(10..500)
    analysis_type: enum(statistical, predictive, descriptive, comparative)
    include_visualization: bool
    confidence_threshold: number(0.0..1.0)

  DataAnalysisResult:
    summary: string(50..500)
    findings: $Finding[](min:1, max:10)
    metrics: $Metrics
    recommendations: string[](max:5)
    confidence_score: number(0.0..1.0)
    visualization_data: $VisualizationData

  Finding:
    title: string(10..100)
    description: string(20..300)
    importance: enum(low, medium, high, critical)
    evidence: string[](max:3)

  Metrics:
    total_records: int(0..1000000)
    processed_records: int(0..1000000)
    anomalies_detected: int(0..1000)
    processing_time_ms: int(0..60000)
    accuracy: number(0.0..1.0)

  VisualizationData:
    chart_type: enum(bar, line, pie, scatter, heatmap)
    x_axis: string[](max:100)
    y_axis: number[](max:100)
    labels: string[](max:100)

  # Types for creative writer agent (simple text output)
  CreativeWritingRequest:
    prompt: string(10..500)
    style: enum(poetic, narrative, descriptive, persuasive, humorous)
    word_count: int(50..2000)
    tone: enum(formal, informal, friendly, professional, dramatic)

  # Types for customer support agent (with thread support)
  CustomerQuery:
    message: string(5..1000)
    category: enum(technical, billing, general, complaint, feedback)
    urgency: enum(low, medium, high)
    customer_id: string(1..50)

  SupportResponse:
    reply: string(20..1000)
    resolved: bool
    followup_needed: bool
    ticket_id: string(1..20)
    next_steps: string[](max:3)
    satisfaction_predicted: number(0.0..5.0)

threads:
  # Thread configuration for customer support conversations
  customer_support_thread:
    provider: openai
    strategy: append
    create: true
    close_on_finish: false
    ttl_hours: 24
    metadata:
      purpose: "customer_support"
      max_messages: 20

assistants:
  # 1. Complex structured output agent - Data Analyst
  data_analyst:
    use: openai
    model: gpt-4o-mini
    system_prompt: |
      You are an expert data analyst. Analyze the provided dataset and query
      to extract meaningful insights. Provide structured analysis with clear
      findings, metrics, and visualization suggestions. Be precise and
      data-driven in your analysis.
    input_type: DataAnalysisRequest
    output_type: DataAnalysisResult
    max_tokens: 2000
    temperature: 0.3

  # 2. Simple text output agent - Creative Writer using Grok (no output_type specified)
  creative_writer:
    use: grok
    model: grok-beta
    system_prompt: |
      You are a creative writer with expertise in various writing styles.
      Generate engaging, original content based on the given prompt.
      Focus on creativity, flow, and adherence to the requested style.
      Return plain text without any JSON formatting or structure.
    input_type: CreativeWritingRequest
    # output_type not specified - will default to string
    max_tokens: 1500
    temperature: 0.9

  # 3. Thread-aware conversational agent - Customer Support
  customer_support:
    use: openai
    model: gpt-4o-mini
    thread:
      use: customer_support_thread
      strategy: append
    dialog:
      max_rounds: 5
    system_prompt: |
      You are a helpful customer support agent. Assist customers with their
      queries professionally and empathetically. Remember conversation context
      and provide personalized responses. Always aim to resolve issues efficiently
      while maintaining high customer satisfaction.
    input_type: CustomerQuery
    output_type: SupportResponse
    max_tokens: 1000
    temperature: 0.5